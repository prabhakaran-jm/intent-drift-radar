# intent-drift-radar

A Gemini 3–powered long-horizon agent that detects when a user's stated goal silently drifts from their real actions over time, with confidence scoring and evidence.

## Quick Start

### Local Development (Two-Process Mode)

Run backend and frontend separately for hot-reload development:

```bash
# Install dependencies
make install

# Run both backend and frontend concurrently
make dev
# Or: ./scripts/dev.sh

# Backend runs on http://localhost:8000
# Frontend runs on http://localhost:5173 (with Vite proxy to backend)
```

Access the app at `http://localhost:5173` - the frontend will proxy `/api/*` requests to the backend.

### Production Build (Single-Container Mode)

Build frontend and serve everything from the backend:

```bash
# Build frontend into backend/static/
./scripts/build.sh
# Or: make build

# Run backend only (serves built frontend)
# IMPORTANT: Run from project root, not from backend/ directory
make run-backend
# Or: uvicorn backend.src.app:app --reload --host 127.0.0.1 --port 8000

# Access at http://localhost:8000
```

The backend serves:
- `/api/*` - API endpoints
- `/` - Frontend SPA (index.html)
- `/assets/*` - Static assets (JS, CSS, images)

## Setup

### Backend

1. Install Python dependencies:
   ```bash
   pip install -r backend/requirements.txt
   ```

2. Set Gemini API key:
   ```bash
   export GEMINI_API_KEY="your-api-key-here"
   ```

3. (Optional) Configure model:
   ```bash
   export GEMINI_MODEL="gemini-3-pro-preview"  # Default
   ```

See [backend/README.md](backend/README.md) for detailed backend documentation.

### Frontend

1. Install dependencies:
   ```bash
   cd frontend && npm install
   ```

2. For local dev, optionally set API base:
   ```bash
   export VITE_API_BASE="http://localhost:8000"
   ```

   If not set, Vite proxy handles `/api` routes automatically in dev mode.

## Project Structure

```
intent-drift-radar/
├── backend/
│   ├── src/
│   │   ├── app.py          # FastAPI app (serves API + static frontend)
│   │   ├── gemini.py       # Gemini 3 Pro integration
│   │   ├── models.py       # Pydantic models
│   │   └── store.py        # JSON file storage
│   ├── static/             # Built frontend (generated by build.sh)
│   └── data/               # JSON data storage
├── frontend/
│   ├── src/                # React + TypeScript source
│   └── vite.config.ts      # Builds to ../backend/static
├── scripts/
│   ├── build.sh            # Build frontend for production
│   └── dev.sh              # Run backend + frontend for dev
└── docs/
    └── ai-studio/          # Prompt templates and examples
```

## Deployment

For Cloud Run or similar single-container deployments:

1. Build frontend: `./scripts/build.sh`
2. Deploy backend (which includes built frontend in `backend/static/`)
3. Set `GEMINI_API_KEY` environment variable
4. Backend serves both API and frontend from one container

## Development

- **Backend API**: FastAPI with Gemini 3 Pro integration
- **Frontend**: Vite + React + TypeScript
- **Storage**: Local JSON files (no database required)
- **Analysis**: Intent drift detection with reasoning cards and evidence

See individual README files in `backend/` and `frontend/` directories for more details.
